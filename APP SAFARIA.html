<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SAFARIA - Application Mobile</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background: #f8f9fa;
            color: #333;
            overflow-x: hidden;
        }

        /* Design inspir√© du chatbot avec gradient bleu-vert */
        .app-container {
            max-width: 375px;
            margin: 0 auto;
            background: white;
            min-height: 100vh;
            position: relative;
        }

        /* Header style Booking.com - Bleu professionnel */
        .header {
            background: #003580;
            color: white;
            padding: 16px;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 8px rgba(0,0,0,0.15);
        }

        .header-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .header-title {
            font-size: 22px;
            font-weight: 700;
            margin: 0;
            color: white;
        }

        .header-subtitle {
            font-size: 13px;
            opacity: 0.9;
            margin-top: 2px;
        }
		     /* Language Selector - NEW */
        .language-selector {
            position: absolute;
            top: 16px;
            right: 70px;
            background: rgba(255,255,255,0.2);
            border-radius: 20px;
            padding: 6px 12px;
            display: flex;
            align-items: center;
            gap: 6px;
            cursor: pointer;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.3);
        }

        .language-selector:hover {
            background: rgba(255,255,255,0.3);
        }

        .language-flag {
            font-size: 18px;
        }

        .language-text {
            font-size: 12px;
            font-weight: 500;
        }

        .language-dropdown {
            position: absolute;
            top: 45px;
            right: 0;
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            padding: 8px;
            min-width: 200px;
            display: none;
            z-index: 1000;
        }

        .language-dropdown.active {
            display: block;
        }

        .language-option {
            padding: 10px 12px;
            border-radius: 8px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            color: #333;
        }

        .language-option:hover {
            background: #f0f0f0;
        }

        .language-option.selected {
            background: #e3f2fd;
            color: #1976d2;
        }

        .user-menu {
            position: relative;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: white;
            color: #1a73e8;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            border: 2px solid white;
            overflow: hidden;
        }
        
        .user-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .user-dropdown {
            display: none;
            position: absolute;
            right: 0;
            top: 50px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.2);
            min-width: 200px;
            z-index: 1000;
        }

        .user-dropdown.active {
            display: block;
        }

        .dropdown-item {
            padding: 14px 16px;
            border-bottom: 1px solid #f0f0f0;
            cursor: pointer;
            font-size: 14px;
            color: #333;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .dropdown-item:last-child {
            border-bottom: none;
        }

        .dropdown-item:hover {
            background: #1a73e8;
        }

        .dropdown-item.logout {
            color: #d32f2f;
        }

        .login-status {
            padding: 12px 16px;
            background: #f8f9fa;
            border-bottom: 1px solid #e0e0e0;
            font-size: 13px;
        }

        .login-status strong {
            display: block;
            color: #003580;
            font-size: 14px;
        }

        /* Barre de recherche style Booking */
        .search-bar {
            background:linear-gradient(135deg, #4285f4 0%, #34a853 100%);
            padding: 20px;
            border-radius: 0 0 8px 8px;
        }

        .search-container {
            background: white;
            border-radius: 8px;
            padding: 16px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.15);
        }

        .search-input {
            width: 100%;
            border: 1px solid #ddd;
            border-radius: 4px;
            padding: 12px 12px 12px 40px;
            font-size: 15px;
            margin-bottom: 12px;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="%23666" stroke-width="2"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/></svg>') no-repeat 10px center;
        }

        .date-guests {
            display: flex;
            gap: 12px;
            margin-bottom: 12px;
        }

.date-input, .guests-input {
    flex: 1;
    border: 1px solid #ddd;
    border-radius: 4px;
    padding: 12px;
    font-size: 13px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    min-width: 0;
    max-width: 150px; /* NOUVELLE LIGNE */
}


        .search-btn {
            width: 100%;
            background: #003580;
            color: white;
            border: none;
            border-radius: 4px;
            padding: 14px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
        }

        .search-btn:hover {
            background: #00224d;
        }

        /* Navigation principale */
        .main-nav {
            padding: 20px;
            background: white;
        }

        .nav-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 16px;
            margin-bottom: 24px;
        }

.nav-card:hover {
    transform: translateY(-5px) scale(1.03);
    box-shadow: 0 12px 35px rgba(0,0,0,0.15);
    border-color: #003580;
}

.nav-card:hover .nav-card-image {
    transform: scale(1.1) rotate(-2deg);
}

.nav-card-image {
    width: 100%;
    height: 100px;
    object-fit: cover;
    border-radius: 6px;
    margin-bottom: 12px;
    transition: transform 0.4s ease;
}

        .nav-card-title {
            font-size: 16px;
            font-weight: 600;
            color: #003580;
            margin-bottom: 4px;
        }

        .nav-card-desc {
            font-size: 13px;
            color: #6b6b6b;
        }

        /* Section principale */
        .main-content {
            padding: 0 20px 100px;
        }

        .section-title {
            font-size: 20px;
            font-weight: 600;
            margin: 24px 0 16px;
            color: #1976d2;
        }

        /* Chatbot Section */
        .chatbot-preview {
            background: linear-gradient(135deg, #4285f4 0%, #34a853 100%);
            border-radius: 16px;
            padding: 20px;
            color: white;
            margin-bottom: 24px;
            position: relative;
            overflow: hidden;
        }

        .chatbot-preview::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 100%;
            height: 200%;
            background: rgba(255,255,255,0.1);
            border-radius: 50%;
        }

        .chatbot-header {
            display: flex;
            align-items: center;
            margin-bottom: 12px;
            position: relative;
            z-index: 2;
        }

        .chatbot-avatar {
            width: 48px;
            height: 48px;
            background: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 12px;
            overflow: hidden;
            padding: 4px;
        }
        
        .chatbot-avatar img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .chatbot-info h3 {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 2px;
        }

        .chatbot-info span {
            font-size: 12px;
            opacity: 0.9;
        }

        .chatbot-message {
            background: rgba(255,255,255,0.15);
            border-radius: 12px;
            padding: 14px;
            font-size: 14px;
            line-height: 1.4;
            position: relative;
            z-index: 2;
        }

        .chat-button {
            background: white;
            color: #4285f4;
            border: none;
            border-radius: 25px;
            padding: 12px 24px;
            font-weight: 600;
            font-size: 14px;
            cursor: pointer;
            margin-top: 16px;
            transition: transform 0.2s ease;
        }

        .chat-button:hover {
            transform: scale(1.05);
        }

        /* Map Section */
        .map-container {
            background: white;
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            margin-bottom: 24px;
        }

        .map-header {
            padding: 16px;
            background: linear-gradient(135deg, #4285f4 0%, #34a853 100%);
            color: white;
        }

        .map-header h3 {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .map-header p {
            font-size: 14px;
            opacity: 0.9;
        }

        #map {
            height: 300px;
            width: 100%;
        }

        .map-controls {
            padding: 16px;
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .filter-btn {
            background: #f1f3f4;
            border: none;
            border-radius: 20px;
            padding: 8px 16px;
            font-size: 13px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .filter-btn.active {
            background: linear-gradient(135deg, #4285f4 0%, #34a853 100%);
            color: white;
        }

        /* Services Grid */
        .services-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 16px;
        }

        .service-card {
            background: white;
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            transition: transform 0.3s ease;
        }

        .service-card:hover {
            transform: translateY(-4px);
        }

        .service-image {
            height: 180px;
            background: linear-gradient(135deg, #e3f2fd 0%, #f8f9ff 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            position: relative;
        }

        .service-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .service-content {
            padding: 16px;
        }

        .service-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 8px;
            color: #1976d2;
        }

        .service-desc {
            font-size: 14px;
            color: #666;
            line-height: 1.4;
            margin-bottom: 12px;
        }

        .service-price {
            font-size: 16px;
            font-weight: 700;
            color: #34a853;
        }

        /* Bottom Navigation */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 100%;
            max-width: 375px;
            background: white;
            border-top: 1px solid #e1e8ed;
            padding: 12px 0 8px;
        }

        .nav-items {
            display: flex;
            justify-content: space-around;
            align-items: center;
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 8px;
            cursor: pointer;
            transition: color 0.2s ease;
            color: #666;
            text-decoration: none;
        }

        .nav-item.active {
            color: #003580;
        }

        .nav-item-icon {
            font-size: 24px;
            margin-bottom: 4px;
        }

        .nav-item-label {
            font-size: 11px;
            font-weight: 500;
        }

        /* Chat Modal */
        .chat-modal {
            position: fixed;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 100%;
            max-width: 375px;
            height: 100vh;
            background: white;
            z-index: 1000;
            display: none;
        }

        .chat-modal.active {
            display: flex;
            flex-direction: column;
        }

        .chat-header {
            background: #003580;
            color: white;
            padding: 16px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .chat-title {
            display: flex;
            align-items: center;
        }

        .chat-avatar {
            width: 40px;
            height: 40px;
            background: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 12px;
            overflow: hidden;
            padding: 4px;
        }
        
        .chat-avatar img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .close-chat {
            background: none;
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
            padding: 4px;
        }

        .chat-messages {
            flex: 1;
            padding: 16px;
            overflow-y: auto;
        }

        .message {
            margin-bottom: 16px;
        }

        .message.bot {
            display: flex;
            align-items: flex-start;
        }

        .message-avatar {
            width: 32px;
            height: 32px;
            background: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 8px;
            flex-shrink: 0;
            overflow: hidden;
            padding: 2px;
        }
        
        .message-avatar img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .message-bubble {
            background: #f1f3f4;
            border-radius: 16px;
            padding: 12px 16px;
            max-width: 80%;
            font-size: 14px;
            line-height: 1.4;
        }

        .message.user {
            text-align: right;
        }

        .message.user .message-bubble {
            background: linear-gradient(135deg, #4285f4 0%, #34a853 100%);
            color: white;
            margin-left: auto;
        }

        .chat-input-container {
            padding: 16px;
            border-top: 1px solid #e1e8ed;
            display: flex;
            gap: 12px;
            align-items: center;
        }

        .chat-input {
            flex: 1;
            border: 1px solid #e1e8ed;
            border-radius: 25px;
            padding: 12px 16px;
            font-size: 14px;
            outline: none;
        }

        .send-btn {
            background: #003580;
            color: white;
            border: none;
            border-radius: 50%;
            width: 44px;
            height: 44px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 16px;
        }

        .send-btn:hover {
            background: #00224d;
        }

        /* Map Modal */
        .map-modal {
            position: fixed;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 100%;
            max-width: 375px;
            height: 100vh;
            background: white;
            z-index: 1000;
            display: none;
            flex-direction: column;
        }

        .map-modal.active {
            display: flex;
        }

        .map-modal-header {
            background: #003580;
            color: white;
            padding: 16px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .map-modal-title {
            font-size: 18px;
            font-weight: 600;
        }

        .close-map {
            background: none;
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
            padding: 4px;
        }

        .map-modal-content {
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        #fullMap {
            flex: 1;
            min-height: 400px;
        }

        .map-modal-controls {
            padding: 16px;
            background: white;
            border-top: 1px solid #e1e8ed;
        }

        .control-row {
            display: flex;
            gap: 8px;
            margin-bottom: 12px;
            flex-wrap: wrap;
        }

        .control-btn {
            background: #f1f3f4;
            border: none;
            border-radius: 20px;
            padding: 8px 16px;
            font-size: 13px;
            cursor: pointer;
            transition: all 0.2s ease;
            flex: 1;
            min-width: 100px;
        }

        .control-btn.active {
            background: #003580;
            color: white;
        }

        .control-btn:hover {
            background: #e7e7e7;
        }

        .control-btn.active:hover {
            background: #00224d;
        }

        /* Splash Screen */
        .splash-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background: #003580;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            animation: fadeOut 0.5s ease-out 2.5s forwards;
        }

        @keyframes fadeOut {
            to {
                opacity: 0;
                visibility: hidden;
            }
        }

        .splash-content {
            text-align: center;
            color: white;
        }

.splash-logo {
    width: 120px;
    height: 120px;
    object-fit: contain;
    margin-bottom: 24px;
    animation: spinLogo 3s linear infinite;
    border-radius: 50%;
}

@keyframes spinLogo {
    0% { transform: rotate(0deg) scale(1); }
    50% { transform: rotate(180deg) scale(1.1); }
    100% { transform: rotate(360deg) scale(1); }
}
        .splash-title {
            font-size: 36px;
            font-weight: 700;
            margin-bottom: 8px;
            letter-spacing: 2px;
        }

        .splash-subtitle {
            font-size: 16px;
            opacity: 0.9;
            margin-bottom: 40px;
        }

        .splash-loader {
            width: 40px;
            height: 40px;
            border: 4px solid rgba(255,255,255,0.3);
            border-top-color: white;
            border-radius: 50%;
            margin: 0 auto;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Login Screen */
        .login-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background: white;
            z-index: 9998;
            display: none;
            flex-direction: column;
            animation: slideIn 0.3s ease-out;
        }

        @keyframes slideIn {
            from {
                transform: translateY(100%);
            }
            to {
                transform: translateY(0);
            }
        }

        .login-screen.active {
            display: flex;
        }

        .login-header {
            background: #003580;
            color: white;
            padding: 16px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .close-btn {
            background: none;
            border: none;
            color: white;
            font-size: 32px;
            cursor: pointer;
            padding: 0;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .login-content {
            flex: 1;
            padding: 32px 24px;
            overflow-y: auto;
        }

        .login-title {
            font-size: 24px;
            font-weight: 400;
            line-height: 1.3;
            margin-bottom: 32px;
            color: #333;
        }

        .social-btn {
            width: 100%;
            padding: 14px 16px;
            margin-bottom: 16px;
            border: 1px solid #ccc;
            border-radius: 4px;
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .social-btn:hover {
            background: #f8f9fa;
            border-color: #999;
        }

        .social-btn svg {
            flex-shrink: 0;
        }

        .google-btn {
            color: #333;
        }

        .apple-btn {
            color: #333;
        }

        .facebook-btn {
            color: #333;
        }

        .email-btn {
            background: #003580;
            color: white;
            border-color: #003580;
        }

        .email-btn:hover {
            background: #00224d;
            border-color: #00224d;
        }

        .login-terms {
            font-size: 13px;
            line-height: 1.4;
            color: #666;
            text-align: center;
            margin-top: 24px;
        }

        .login-terms a {
            color: #003580;
            text-decoration: underline;
        }

        .login-footer {
            text-align: center;
            font-size: 14px;
            color: #666;
            margin-top: 32px;
        }

        /* Responsive */
        @media (max-width: 374px) {
            .app-container {
                max-width: 100%;
            }
            
            .bottom-nav {
                max-width: 100%;
            }
            
            .chat-modal {
                max-width: 100%;
            }
            
            .map-modal {
                max-width: 100%;
            }
        }

        /* Loading */
        .loading {
            text-align: center;
            padding: 20px;
            color: #666;
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 0.6s ease-out;
        }

        /* Map markers custom styles */
        .marker-popup {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
        }

        .marker-popup h3 {
            color: #1976d2;
            margin-bottom: 8px;
            font-size: 16px;
        }

        .marker-popup p {
            margin-bottom: 4px;
            font-size: 14px;
            color: #666;
        }

        .marker-popup .price {
            font-weight: bold;
            color: #34a853;
            font-size: 15px;
        }
		.favorite-badge {
    position: absolute;
    top: -8px;
    right: -8px;
    background: #ff4444;
    color: white;
    border-radius: 50%;
    width: 22px;
    height: 22px;
    font-size: 13px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
    box-shadow: 0 2px 8px rgba(0,0,0,0.11);
    z-index: 1;
    transition: transform 0.2s;
    pointer-events: none;
}
.favorite-badge.active {
    animation: popBadge 0.45s;
    display: flex;
}
@keyframes popBadge {
    0% { transform: scale(0.4);}
    50%{ transform: scale(1.5);}
    70%{transform: scale(0.90);}
    100% { transform: scale(1);}

    </style>
    
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
</head>
<body>
    <!-- Splash Screen -->
    <div class="splash-screen" id="splashScreen">
        <div class="splash-content">
            <img src="safaria.png" alt="SAFARIA Logo" class="splash-logo">
            <h1 class="splash-title">SAFARIA</h1>
            <p class="splash-subtitle">D√©couvrez le Maroc authentique</p>
            <div class="splash-loader"></div>
        </div>
    </div>

    <!-- Login Screen -->
    <div class="login-screen" id="loginScreen">
        <div class="login-header">
            <button class="close-btn" onclick="skipLogin()">√ó</button>
            <h2 style="text-align: center; color: white; margin: 0;">SAFARIA</h2>
        </div>
        <div class="login-content">
            <h1 class="login-title">Connectez-vous pour acc√©der plus facilement aux d√©tails de votre voyage</h1>
            
            <button class="social-btn google-btn">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" fill="#4285F4"/>
                    <path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" fill="#34A853"/>
                    <path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" fill="#FBBC05"/>
                    <path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" fill="#EA4335"/>
                </svg>
                <span>Continuer avec Google</span>
            </button>
            
            <button class="social-btn apple-btn">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M17.05 20.28c-.98.95-2.05.8-3.08.35-1.09-.46-2.09-.48-3.24 0-1.44.62-2.2.44-3.06-.35C2.79 15.25 3.51 7.59 9.05 7.31c1.35.07 2.29.74 3.08.8 1.18-.24 2.31-.93 3.57-.84 1.51.12 2.65.72 3.4 1.8-3.12 1.87-2.38 5.98.48 7.13-.57 1.5-1.31 2.99-2.54 4.09l.01-.01zM12.03 7.25c-.15-2.23 1.66-4.07 3.74-4.25.29 2.58-2.34 4.5-3.74 4.25z"/>
                </svg>
                <span>Continuer avec Apple</span>
            </button>
            
            <button class="social-btn facebook-btn">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z" fill="#1877F2"/>
                </svg>
                <span>Continuer avec Facebook</span>
            </button>
            
            <button class="social-btn email-btn">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
                    <polyline points="22,6 12,13 2,6"/>
                </svg>
                <span>Continuer avec une adresse e-mail</span>
            </button>
            
            <p class="login-terms">En cr√©ant ou en vous connectant √† un compte, vous acceptez nos <a href="#">conditions g√©n√©rales</a> et notre <a href="#">charte de confidentialit√©</a>.</p>
            
            <p class="login-footer">¬©2025-2026 safaria.com</p>
        </div>
    </div>

    <div class="app-container" id="mainApp" style="display: none;">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div style="display: flex; align-items: center; gap: 12px;">
                    <img src="safaria.png" alt="SAFARIA Logo"  style="width: 50px; height: 50px; object-fit: contain;">
                    <div>
                        <h1 class="header-title">SAFARIA</h1>
                        <div class="header-subtitle">D√©couvrez le Maroc authentique</div>
                    </div>
                </div>
				
                <div class="user-menu">
                    <div class="user-avatar" onclick="toggleUserMenu()">
                        <img src="rajaa.png"alt="Avatar" >
                    </div>
                    <div class="user-dropdown" id="userDropdown">
                        <div class="login-status" id="loginStatus">
                            <strong>Non connect√©</strong>
                            <span>Connectez-vous pour profiter de tous les avantages</span>
                        </div>
                        <div class="dropdown-item" onclick="showLogin()" id="loginBtn">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>
                            <span>Se connecter</span>
                        </div>
                        <div class="dropdown-item" style="display: none;" id="profileBtn" onclick="showProfile()">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="3"></circle><path d="M12 1v6m0 6v6m4.22-13.22l-1.42 1.42m-5.6 5.6l-1.42 1.42m8.44 0l-1.42-1.42m-5.6-5.6l-1.42-1.42"></path></svg>
                            <span>Mon profil</span>
                        </div>
                        <div class="dropdown-item" style="display: none;" id="reservationsBtn" onclick="showReservations()">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline></svg>
                            <span>Mes r√©servations</span>
                        </div>
                        <div class="dropdown-item logout" style="display: none;" id="logoutBtn" onclick="logout()">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4m7 14l5-5-5-5m5 5H9"></path></svg>
                            <span>Se d√©connecter</span>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <!-- Barre de recherche -->
        <div class="search-bar">
            <div class="search-container">
                <input type="text" class="search-input" placeholder="Saisissez une destination">
                <div class="date-guests">
                    <input type="text" class="date-input" placeholder="jeu. 6 nov. - ven. 7 nov." readonly>
                    <input type="text" class="guests-input" placeholder="2 adultes" readonly>
                </div>
                <button class="search-btn">Rechercher</button>
            </div>
        </div>

        <!-- Main Navigation -->
        <section class="main-nav">
            <div class="nav-grid">
                <div class="nav-card" onclick="showSection('circuits')">
                    <img src="https://i.pinimg.com/736x/c9/51/93/c95193c706b4a3e85d67a4d674d7ea40.jpg" alt="Caravane" class="nav-card-image">
                    <div class="nav-card-title">Circuits</div>
                    <div class="nav-card-desc">5 itin√©raires disponibles</div>
                </div>
                <div class="nav-card" onclick="showSection('familles')">
                    <img src="famille.jpg" alt="Riad marocain" class="nav-card-image">
                    <div class="nav-card-title">Familles d'accueil</div>
                    <div class="nav-card-desc">12 partenaires</div>
                </div>
                <div class="nav-card" onclick="showSection('ateliers')">
                    <img src="artisanat.jpg" alt="Artisanat marocain" class="nav-card-image">
                    <div class="nav-card-title">Ateliers</div>
                    <div class="nav-card-desc">8 exp√©riences</div>
                </div>
                <div class="nav-card" onclick="showSection('360')">
                    <video width="98%" height= "95"controls>
    <source src="safariaa.mp4" type="video/mp4" class="nav-card-image">
</video>
                    <div class="nav-card-title">Visite 360¬∞</div>
                    <div class="nav-card-desc">D√©couverte virtuelle</div>
                </div>
            </div>
        </section>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Chatbot Preview -->
            <div class="chatbot-preview">
                <div class="chatbot-header">
                    <div class="chatbot-avatar">
                        <img src="safaria.png" alt="Assistant SAFARIA">
                    </div>
                    <div class="chatbot-info">
                        <h3>Assistant SAFARIA</h3>
                        <span style="display: flex; align-items: center; gap: 6px;">
                            <span style="width: 8px; height: 8px; background: #4caf50; border-radius: 50%; display: inline-block;"></span>
                            En ligne
                        </span>
                    </div>
                </div>
                <div class="chatbot-message">
                    Bonjour ! <span style="font-size: 20px;">üëã</span><br>
                    Je suis votre assistant SAFARIA. Comment puis-je vous aider aujourd'hui ?
                </div>
                <button class="chat-button" onclick="openChat()">Commencer la conversation</button>
            </div>

            <!-- Map Preview -->
            <div class="map-container">
                <div class="map-header">
                    <h3>Carte Interactive</h3>
                    <p>Explorez nos services sur la carte du Maroc</p>
                </div>
                <div id="map"></div>
                <div class="map-controls">
                    <button class="filter-btn active" onclick="filterMap('all')">Tout</button>
                    <button class="filter-btn" onclick="filterMap('circuits')">Circuits</button>
                    <button class="filter-btn" onclick="filterMap('familles')">Familles</button>
                    <button class="filter-btn" onclick="filterMap('ateliers')">Ateliers</button>
                    <button class="control-btn" onclick="openMapModal()" style="margin-left: auto;">Plein √©cran</button>
                </div>
            </div>

            <!-- Services Section -->
            <h2 class="section-title">Nos Services</h2>
            <div class="services-grid" id="servicesContainer">
                <!-- Services will be loaded here -->
            </div>
        </main>

        <!-- Bottom Navigation -->
        <nav class="bottom-nav">
            <div class="nav-items">
                <a href="#" class="nav-item active" onclick="showPage('home')">
                    <div class="nav-item-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg>
                    </div>
                    <div class="nav-item-label">Accueil</div>
                </a>
                <a href="#" class="nav-item" onclick="openChat()">
                    <div class="nav-item-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path></svg>
                    </div>
                    <div class="nav-item-label">Chat</div>
                </a>
                <a href="#" class="nav-item" onclick="openMapModal()">
                    <div class="nav-item-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="1 6 1 22 8 18 16 22 23 18 23 2 16 6 8 2 1 6"></polygon><line x1="8" y1="2" x2="8" y2="18"></line><line x1="16" y1="6" x2="16" y2="22"></line></svg>
                    </div>
                    <div class="nav-item-label">Carte</div>
                </a>
        <a href="#" class="nav-item" onclick="showPage('favorites')" id="favoritesNav" style="position:relative;">
    <div class="nav-item-icon" style="position:relative;">
        <!-- Ic√¥ne SVG du c≈ìur vide (change possible selon style) -->
        <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="#003580" stroke-width="2">
          <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
        </svg>
        <span id="favoriteBadge" class="favorite-badge">0</span>
    </div>
    <div class="nav-item-label">Favoris</div>
</a>

                <a href="#" class="nav-item" onclick="showPage('profile')">
                    <div class="nav-item-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>
                    </div>
                    <div class="nav-item-label">Profil</div>
                </a>
            </div>
        </nav>
    </div>

    <!-- Chat Modal -->
    <div class="chat-modal" id="chatModal">
        <div class="chat-header">
            <div class="chat-title">
                <div class="chat-avatar">
                    <img src="safaria.png" alt="Assistant SAFARIA">
                </div>
                <div>
                    <div style="font-weight: 600;">Assistant SAFARIA</div>
                    <div style="font-size: 12px; opacity: 0.9; display: flex; align-items: center; gap: 6px;">
                        <span style="width: 6px; height: 6px; background: #4caf50; border-radius: 50%; display: inline-block;"></span>
                        En ligne
                    </div>
                </div>
            </div>
            <button class="close-chat" onclick="closeChat()">√ó</button>
        </div>
        
        <div class="chat-messages" id="chatMessages">
            <div class="message bot">
                <div class="message-avatar">
                    <img src="safaria.png" alt="Assistant SAFARIA">
                </div>
                <div class="message-bubble">
                    Bonjour ! üëã<br><br>
                    Je suis votre assistant SAFARIA. Je peux vous aider avec :
                    <br><br>
                    <strong>Circuits nomades</strong> - 5 itin√©raires authentiques<br>
                    <strong>Familles d'accueil</strong> - Immersion locale<br>
                    <strong>Ateliers artisanaux</strong> - Savoir-faire traditionnel<br>
                    <br>
                    Comment puis-je vous aider aujourd'hui ?
                </div>
            </div>
        </div>
        
        <div class="chat-input-container">
            <input type="text" class="chat-input" id="chatInput" placeholder="Votre message...">
            <button class="send-btn" onclick="sendMessage()">‚ñ∂</button>
        </div>
    </div>

    <!-- Map Modal -->
    <div class="map-modal" id="mapModal">
        <div class="map-modal-header">
            <div class="map-modal-title">Carte Interactive SAFARIA</div>
            <button class="close-map" onclick="closeMapModal()">√ó</button>
        </div>
        
        <div class="map-modal-content">
            <div id="fullMap"></div>
            
            <div class="map-modal-controls">
                <div class="control-row">
                    <button class="control-btn active" onclick="filterFullMap('all')">Tous les services</button>
                    <button class="control-btn" onclick="filterFullMap('circuits')">Circuits</button>
                </div>
                <div class="control-row">
                    <button class="control-btn" onclick="filterFullMap('familles')">Familles d'accueil</button>
                    <button class="control-btn" onclick="filterFullMap('ateliers')">Ateliers</button>
                </div>
                <div class="control-row">
                    <button class="control-btn" onclick="toggle3D()">Vue 3D</button>
                    <button class="control-btn" onclick="centerMap()">Centrer sur le Maroc</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Leaflet JavaScript -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
    
    <script>
        // Donn√©es des services SAFARIA
        const safariaData = {
            circuits: [
                { id: 1, name: "Oasis du Sud", price: "1200 MAD", location: [30.4278, -9.5981], description: "D√©couverte des oasis du Sud marocain avec guide berb√®re", duration: "7 jours", image: "D√©couverte des oasis du Sud marocain avec guide berb√®re.jpg" },
                { id: 2, name: "Route des Kasbahs", price: "1400 MAD", location: [31.0522, -6.7991], description: "Circuit historique √† travers les kasbahs imp√©riales", duration: "5 jours", image: "Circuit historique √† travers les kasbahs imp√©riales.jpg" },
                { id: 3, name: "D√©sert et √âtoiles", price: "1600 MAD", location: [31.7917, -7.0926], description: "Aventure dans le Sahara avec nuit sous les √©toiles", duration: "6 jours", image: "Aventure dans le Sahara avec nuit sous les √©toiles1.jpg" },
                { id: 4, name: "Montagnes de l'Atlas", price: "1100 MAD", location: [31.2574, -7.9811], description: "Randonn√©e et culture berb√®re dans l'Atlas", duration: "4 jours", image: "Randonn√©e et culture berb√®re dans l'Atlas.jpg" },
                { id: 5, name: "C√¥te Atlantique", price: "1300 MAD", location: [31.5085, -9.7595], description: "D√©couverte de la c√¥te atlantique et surf", duration: "5 jours", image: "D√©couverte de la c√¥te atlantique et surf.jpg" }
            ],
            familles: [
                { id: 1, name: "Famille Amellal", price: "400 MAD/nuit", location: [33.9716, -6.8498], description: "Accueil chaleureux √† Rabat, sp√©cialit√©s locales", image: "Accueil chaleureux √† Rabat, sp√©cialit√©s locales.jpg" },
                { id: 2, name: "Famille Benali", price: "350 MAD/nuit", location: [33.5731, -7.5898], description: "Maison traditionnelle √† Casablanca, artisanat", image: "Maison traditionnelle √† Casablanca, artisanat.jpg" },
                { id: 3, name: "Famille Chakir", price: "300 MAD/nuit", location: [34.0209, -6.8416], description: "Villa moderne √† Sal√© avec jardin", image: "Villa moderne √† Sal√© avec jardin.jpg" },
                { id: 4, name: "Famille Tazi", price: "450 MAD/nuit", location: [31.7917, -7.0926], description: "Riad authentique √† Marrakech, m√©dina", image: "Riad authentique √† Marrakech, m√©dina.jpg" },
                { id: 5, name: "Famille Idrissi", price: "500 MAD/nuit", location: [34.0181, -6.8262], description: "Appartement moderne √† Rabat centre", image: "Appartement moderne √† Rabat centre.jpg" }
            ],
            ateliers: [
                { id: 1, name: "Poterie de Sal√©", price: "200 MAD", location: [34.0209, -6.8416], description: "Atelier de poterie traditionnelle marocaine", image: "Atelier de poterie traditionnelle marocaine.jpg" },
                { id: 2, name: "Tissage Berb√®re", price: "250 MAD", location: [31.7917, -7.0926], description: "Apprentissage du tissage berb√®re ancestral", image: "Tissage Berb√®re1.jpg" },
                { id: 3, name: "Dinanderie Fassi", price: "300 MAD", location: [34.0331, -5.0003], description: "Art du cuivre et laiton de F√®s", image: "Dinanderie Fassi.jpg" },
                { id: 4, name: "Maroquinerie Artisanale", price: "180 MAD", location: [31.7917, -7.0926], description: "Fabrication de cuir traditionnel", image: "Maroquinerie Artisanale.jpg" },
                { id: 5, name: "Bijoux Touaregs", price: "220 MAD", location: [30.4278, -9.5981], description: "Cr√©ation de bijoux traditionnels touaregs", image: "Bijoux Touaregs.jpg" }
            ]
        };


        // Variables globales
        let map, fullMap;
        let markers = [];
        let fullMapMarkers = [];
        let currentFilter = 'all';

        // Initialisation
        document.addEventListener('DOMContentLoaded', function() {
            // Show splash screen first
            setTimeout(() => {
                document.getElementById('splashScreen').style.display = 'none';
                document.getElementById('loginScreen').classList.add('active');
            }, 3000);
            
            initMap();
            loadServices();
            setupChatInput();
        });

        // Skip login and go to main app
        function skipLogin() {
            document.getElementById('loginScreen').classList.remove('active');
            document.getElementById('mainApp').style.display = 'block';
        }

        // Social login handlers
        document.addEventListener('click', function(e) {
            if (e.target.closest('.social-btn')) {
                const btn = e.target.closest('.social-btn');
                if (btn.classList.contains('email-btn')) {
                    // Email login
                    skipLogin();
                    showLogin();
                } else {
                    // Social login
                    skipLogin();
                    isLoggedIn = true;
                    currentUser = {
                        name: "Utilisateur SAFARIA",
                        email: "user@safaria.ma"
                    };
                    updateLoginUI();
                    alert('‚úÖ Connexion r√©ussie !\n\nBienvenue sur SAFARIA.');
                }
            }
        });

        // Initialisation de la carte principale
        function initMap() {
            map = L.map('map').setView([31.7917, -7.0926], 6);
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '¬© OpenStreetMap contributors'
            }).addTo(map);
            
            addMarkers(map, markers);
        }

        // Initialisation de la carte plein √©cran
        function initFullMap() {
            if (fullMap) return;
            
            fullMap = L.map('fullMap').setView([31.7917, -7.0926], 6);
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '¬© OpenStreetMap contributors'
            }).addTo(fullMap);
            
            addMarkers(fullMap, fullMapMarkers);
            
            // Fix pour le redimensionnement
            setTimeout(() => {
                fullMap.invalidateSize();
            }, 100);
        }

        // Ajout des marqueurs
        function addMarkers(mapInstance, markersArray) {
            // Clear existing markers
            markersArray.forEach(marker => mapInstance.removeLayer(marker));
            markersArray.length = 0;

            Object.keys(safariaData).forEach(category => {
                if (currentFilter !== 'all' && currentFilter !== category) return;
                
                const icon = category === 'circuits' ? 'üê™' : 
                           category === 'familles' ? 'üè†' : 'üé®';
                
                safariaData[category].forEach(item => {
                    const customIcon = L.divIcon({
                        html: `<div style="background: white; border-radius: 50%; width: 45px; height: 45px; display: flex; align-items: center; justify-content: center; box-shadow: 0 2px 10px rgba(0,0,0,0.3); padding: 4px;">
                                  <img src="safaria.png" alt="Safaria Logo" style="width: 100%; height: 100%; object-fit: contain;">
                               </div>`,
                        className: 'custom-marker',
                        iconSize: [45, 45],
                        iconAnchor: [22, 22]
                    });
                    
                    const marker = L.marker(item.location, { icon: customIcon })
                        .bindPopup(`
                            <div class="marker-popup">
                                <h3>${item.name}</h3>
                                <p>${item.description}</p>
                                ${item.duration ? `<p><strong>Dur√©e:</strong> ${item.duration}</p>` : ''}
                                <p class="price">${item.price}</p>
                            </div>
                        `)
                        .addTo(mapInstance);
                    
                    markersArray.push(marker);
                });
            });
        }

        // Chargement des services
        function loadServices() {
            const container = document.getElementById('servicesContainer');
            let servicesHtml = '';

            const serviceImages = {
                circuits: [
                    'https://i.pinimg.com/1200x/af/a2/36/afa23651af59034454b5ae3d90ba3ea0.jpg',
                    'https://i.pinimg.com/1200x/3e/88/02/3e880208ec75041c6aa74aff52a19c21.jpg'
                ],
                familles: [
                    'FAMILLES.jpg',
                    'FAMI.png'
                ],
                ateliers: [
                    'https://i.pinimg.com/736x/27/aa/a3/27aaa3d31c15cb03694154d185d52e73.jpg',
                    'https://i.pinimg.com/736x/df/d3/9e/dfd39e6abb4f5d6d9dab5e7dca3dc838.jpg'
                ]
            };

            let imageIndex = 0;
            Object.keys(safariaData).forEach(category => {
                const categoryName = category === 'circuits' ? 'Circuits' : 
                                   category === 'familles' ? 'Familles d\'accueil' : 'Ateliers';

                safariaData[category].slice(0, 2).forEach((item, idx) => {
                    const imageUrl = serviceImages[category][idx];
                    servicesHtml += `
                        <div class="service-card fade-in">
                            <div class="service-image"><img src="${imageUrl}" alt="${item.name}"></div>
                            <div class="service-content">
                                <div class="service-title">${item.name}</div>
                                <div class="service-desc">${item.description}</div>
                                ${item.duration ? `<div style="font-size: 13px; color: #999; margin-bottom: 8px;">Dur√©e: ${item.duration}</div>` : ''}
                                <div class="service-price">${item.price}</div>
                            </div>
                        </div>
                    `;
                });
            });

            container.innerHTML = servicesHtml;
        }

        // Filtrage de la carte
        function filterMap(filter) {
            currentFilter = filter;
            
            // Update button states
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            addMarkers(map, markers);
        }

        function filterFullMap(filter) {
            currentFilter = filter;
            
            // Update button states
            document.querySelectorAll('.map-modal .control-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            if (fullMap) {
                addMarkers(fullMap, fullMapMarkers);
            }
        }

        // Chat fonctionnalit√©
        function openChat() {
            document.getElementById('chatModal').classList.add('active');
        }

        function closeChat() {
            document.getElementById('chatModal').classList.remove('active');
        }

        function setupChatInput() {
            const chatInput = document.getElementById('chatInput');
            chatInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    sendMessage();
                }
            });
        }

        function sendMessage() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();
            
            if (!message) return;
            
            // Add user message
            addChatMessage(message, 'user');
            input.value = '';
            
            // Simulate bot response
            setTimeout(() => {
                const response = getBotResponse(message);
                addChatMessage(response, 'bot');
            }, 1000);
        }

        function addChatMessage(message, sender) {
            const messagesContainer = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${sender}`;
            
            if (sender === 'bot') {
                messageDiv.innerHTML = `
                    <div class="message-avatar">
                        <img src="safaria.png" alt="Assistant SAFARIA">
                    </div>
                    <div class="message-bubble">${message}</div>
                `;
            } else {
                messageDiv.innerHTML = `
                    <div class="message-bubble">${message}</div>
                `;
            }
            
            messagesContainer.appendChild(messageDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        function getBotResponse(message) {
            const lowerMessage = message.toLowerCase();
            
            if (lowerMessage.includes('circuit') || lowerMessage.includes('caravane')) {
                return `üê™ <strong>Nos Circuits Nomades</strong><br><br>
                        Nous proposons 5 circuits authentiques :<br>
                        ‚Ä¢ Oasis du Sud (1200 MAD, 7 jours)<br>
                        ‚Ä¢ Route des Kasbahs (1400 MAD, 5 jours)<br>
                        ‚Ä¢ D√©sert et √âtoiles (1600 MAD, 6 jours)<br>
                        ‚Ä¢ Montagnes de l'Atlas (1100 MAD, 4 jours)<br>
                        ‚Ä¢ C√¥te Atlantique (1300 MAD, 5 jours)<br><br>
                        Quel circuit vous int√©resse ?`;
            }
            
            if (lowerMessage.includes('famille') || lowerMessage.includes('h√©bergement')) {
                return `üè† <strong>Familles d'accueil</strong><br><br>
                        Vivez une exp√©rience authentique avec nos familles partenaires :<br>
                        ‚Ä¢ Rabat, Casablanca, Marrakech<br>
                        ‚Ä¢ De 300 √† 500 MAD/nuit<br>
                        ‚Ä¢ Repas traditionnels inclus<br>
                        ‚Ä¢ Immersion culturelle garantie<br><br>
                        Dans quelle ville souhaitez-vous s√©journer ?`;
            }
            
            if (lowerMessage.includes('atelier') || lowerMessage.includes('artisanat')) {
                return `üé® <strong>Ateliers Artisanaux</strong><br><br>
                        Apprenez les savoir-faire traditionnels :<br>
                        ‚Ä¢ Poterie de Sal√© (200 MAD)<br>
                        ‚Ä¢ Tissage Berb√®re (250 MAD)<br>
                        ‚Ä¢ Dinanderie Fassi (300 MAD)<br>
                        ‚Ä¢ Maroquinerie (180 MAD)<br>
                        ‚Ä¢ Bijoux Touaregs (220 MAD)<br><br>
                        Quel artisanat vous attire le plus ?`;
            }
            
            if (lowerMessage.includes('cuisine') || lowerMessage.includes('culinaire') || lowerMessage.includes('manger')) {
                return `üçΩÔ∏è <strong>Activit√©s Culinaires SAFARIA</strong><br><br>
                        D√©couvrez la gastronomie marocaine authentique :<br>
                        ‚Ä¢ üë®‚Äçüç≥ <strong>Cours de cuisine traditionnelle</strong> (350 MAD)<br>
                           Tajine, couscous, pastilla avec chef local<br>
                        ‚Ä¢ ü´ñ <strong>C√©r√©monie du th√© √† la menthe</strong> (150 MAD)<br>
                           Art ancestral de pr√©paration du th√©<br>
                        ‚Ä¢ ü•ñ <strong>Atelier p√¢tisserie marocaine</strong> (280 MAD)<br>
                           Chebakia, makrout, cornes de gazelle<br>
                        ‚Ä¢ üå∂Ô∏è <strong>Visite des souks aux √©pices</strong> (200 MAD)<br>
                           D√©couverte des saveurs et aromates<br>
                        ‚Ä¢ üçä <strong>D√Æner dans une famille marocaine</strong> (400 MAD)<br>
                           Repas authentique et convivial<br><br>
                        Quelle exp√©rience culinaire vous tente ?`;
            }
            
            if (lowerMessage.includes('surf') || lowerMessage.includes('sport') || lowerMessage.includes('activit√©')) {
                return `üèÑ <strong>Activit√©s Sportives & Aventure</strong><br><br>
                        ‚Ä¢ üèÑ‚Äç‚ôÇÔ∏è <strong>Cours de surf</strong> - Essaouira & Taghazout<br>
                        ‚Ä¢ üê™ <strong>Randonn√©e chameli√®re</strong> - D√©sert du Sahara<br>
                        ‚Ä¢ ü•æ <strong>Trekking Atlas</strong> - Vall√©es berb√®res<br>
                        ‚Ä¢ ü™Ç <strong>Parapente</strong> - Agadir & Marrakech<br>
                        ‚Ä¢ üö¥ <strong>VTT</strong> - Palmeraies et montagnes<br>
                        ‚Ä¢ üßó <strong>Escalade</strong> - Gorges du Todra<br><br>
                        Quel sport vous int√©resse ?`;
            }
            
            if (lowerMessage.includes('prix') || lowerMessage.includes('tarif')) {
                return `üí∞ <strong>Nos Tarifs</strong><br><br>
                        ‚Ä¢ <strong>Circuits:</strong> 1100 √† 1600 MAD<br>
                        ‚Ä¢ <strong>Familles:</strong> 300 √† 500 MAD/nuit<br>
                        ‚Ä¢ <strong>Ateliers:</strong> 180 √† 300 MAD<br><br>
                        R√©ductions groupes et s√©jours longs disponibles !<br>
                        Voulez-vous un devis personnalis√© ?`;
            }
            
            if (lowerMessage.includes('r√©servation') || lowerMessage.includes('r√©server')) {
                return `üìÖ <strong>R√©servation</strong><br><br>
                        Pour r√©server, j'ai besoin de :<br>
                        ‚Ä¢ Service souhait√©<br>
                        ‚Ä¢ Dates de voyage<br>
                        ‚Ä¢ Nombre de personnes<br>
                        ‚Ä¢ Pr√©f√©rences particuli√®res<br><br>
                        Dites-moi ce qui vous int√©resse et je vous guide !`;
            }
            
            return `Merci pour votre message ! üòä<br><br>
                    Je peux vous aider avec :<br>
                    ‚Ä¢ üê™ <strong>Circuits nomades</strong><br>
                    ‚Ä¢ üè† <strong>Familles d'accueil</strong><br>
                    ‚Ä¢ üé® <strong>Ateliers artisanaux</strong><br>
                    ‚Ä¢ üí∞ <strong>Tarifs et r√©servations</strong><br><br>
                    Que souhaitez-vous d√©couvrir ?`;
        }

        // Map Modal fonctionnalit√©
        function openMapModal() {
            document.getElementById('mapModal').classList.add('active');
            if (!fullMap) {
                setTimeout(initFullMap, 100);
            } else {
                setTimeout(() => {
                    fullMap.invalidateSize();
                }, 100);
            }
        }

        function closeMapModal() {
            document.getElementById('mapModal').classList.remove('active');
        }

        function toggle3D() {
            if (!fullMap) return;
            
            // Simulate 3D effect with tilt
            const currentTilt = fullMap.options.worldCopyJump;
            alert('Vue 3D activ√©e ! üó∫Ô∏è\n\nFonctionnalit√© premium - Perspective satellite avec relief 3D du Maroc disponible dans la version compl√®te.');
        }

        function centerMap() {
            if (fullMap) {
                fullMap.setView([31.7917, -7.0926], 6);
            }
        }

        // Favorites system
        let favorites = [];

        function addToFavorites(itemId, itemName, itemType) {
            const item = { id: itemId, name: itemName, type: itemType };
            const existingIndex = favorites.findIndex(f => f.id === itemId && f.type === itemType);
            
            if (existingIndex === -1) {
                favorites.push(item);
                updateFavoriteBadge();
                alert(`‚ù§Ô∏è Ajout√© aux favoris !\n\n${itemName} a √©t√© ajout√© √† vos favoris.`);
            } else {
                favorites.splice(existingIndex, 1);
                updateFavoriteBadge();
                alert(`üíî Retir√© des favoris\n\n${itemName} a √©t√© retir√© de vos favoris.`);
            }
        }

function updateFavoriteBadge() {
    const badge = document.getElementById('favoriteBadge');
    if (favorites.length > 0) {
        badge.textContent = favorites.length;
        badge.classList.add('active');
    } else {
        badge.classList.remove('active');
    }
}
        // Navigation entre pages
        function showPage(page) {
            // Update nav active state
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            event.target.closest('.nav-item').classList.add('active');
            
            // Show different content based on page
            if (page === 'favorites') {
                showFavorites();
            } else if (page === 'profile') {
                alert('üë§ Profil Utilisateur\n\nGestion du compte, historique des r√©servations et pr√©f√©rences.');
            }
        }

        function showFavorites() {
            if (favorites.length === 0) {
                alert('‚ù§Ô∏è Page Favoris\n\nAucun favori pour le moment.\n\nAjoutez des exp√©riences √† vos favoris en cliquant sur le c≈ìur ‚ù§Ô∏è');
                return;
            }
            
            let message = '‚ù§Ô∏è Mes Favoris SAFARIA\n\n';
            favorites.forEach((fav, index) => {
                const icon = fav.type === 'circuits' ? 'üê™' : 
                           fav.type === 'familles' ? 'üè†' : 'üé®';
                message += `${index + 1}. ${icon} ${fav.name}\n`;
            });
            message += `\n${favorites.length} exp√©rience(s) sauvegard√©e(s)`;
            
            alert(message);
        }

        function showSection(section) {
            const container = document.getElementById('servicesContainer');
            let servicesHtml = '';
            
            const sectionData = section === 'circuits' ? safariaData.circuits :
                              section === 'familles' ? safariaData.familles :
                              section === 'ateliers' ? safariaData.ateliers : [];
            
            if (section === '360') {
                alert('üì∑ Visite 360¬∞\n\nüê™ Int√©rieur des caravanes\nüè† Villages locaux\nüé® Ateliers artisanaux\n\nExp√©rience immersive compl√®te !');
                return;
            }
            
            const icon = section === 'circuits' ? 'üê™' : 
                        section === 'familles' ? 'üè†' : 'üé®';
            
            sectionData.forEach(item => {
                const imageUrl = item.image || 'safaria.png';
                const isFavorite = favorites.some(f => f.id === item.id && f.type === section);
                const heartIcon = isFavorite ? '‚ù§Ô∏è' : 'ü§ç';
                
                servicesHtml += `
                    <div class="service-card fade-in">
                        <div class="service-image">
                            <img src="${imageUrl}" alt="${item.name}">
                            <button onclick="addToFavorites(${item.id}, '${item.name}', '${section}')" 
                                    style="position: absolute; top: 12px; right: 12px; background: white; border: none; border-radius: 50%; width: 40px; height: 40px; font-size: 20px; cursor: pointer; box-shadow: 0 2px 8px rgba(0,0,0,0.2); transition: transform 0.2s;">
                                ${heartIcon}
                            </button>
                        </div>
                        <div class="service-content">
                            <div class="service-title">${item.name}</div>
                            <div class="service-desc">${item.description}</div>
                            ${item.duration ? `<div style="font-size: 13px; color: #999; margin-bottom: 8px;">Dur√©e: ${item.duration}</div>` : ''}
                            <div class="service-price">${item.price}</div>
                        </div>
                    </div>
                `;
            });
			
            
            container.innerHTML = servicesHtml;
            
            // Update section title
            const sectionNames = {
                circuits: 'Nos Circuits Nomades',
                familles: 'Familles d\'accueil',
                ateliers: 'Ateliers Artisanaux'
            };
            document.querySelector('.section-title').textContent = sectionNames[section];
        }

        // User authentication
        let isLoggedIn = false;
        let currentUser = null;

        function toggleUserMenu() {
            const dropdown = document.getElementById('userDropdown');
            dropdown.classList.toggle('active');
        }

        function showLogin() {
            // Simuler une connexion
            isLoggedIn = true;
            currentUser = {
                name: "Utilisateur SAFARIA",
                email: "user@safaria.ma"
            };
            
            updateLoginUI();
            toggleUserMenu();
            
            alert('‚úÖ Connexion r√©ussie !\n\nBienvenue sur SAFARIA.\nVous pouvez maintenant profiter de tous nos services.');
        }

        function logout() {
            if (confirm('Voulez-vous vraiment vous d√©connecter ?')) {
                isLoggedIn = false;
                currentUser = null;
                updateLoginUI();
                toggleUserMenu();
                
                alert('üëã D√©connexion r√©ussie !\n\n√Ä bient√¥t sur SAFARIA.');
            }
        }

        function updateLoginUI() {
            const loginStatus = document.getElementById('loginStatus');
            const loginBtn = document.getElementById('loginBtn');
            const profileBtn = document.getElementById('profileBtn');
            const reservationsBtn = document.getElementById('reservationsBtn');
            const logoutBtn = document.getElementById('logoutBtn');
            
            if (isLoggedIn) {
                loginStatus.innerHTML = `<strong>${currentUser.name}</strong><span>${currentUser.email}</span>`;
                loginBtn.style.display = 'none';
                profileBtn.style.display = 'flex';
                reservationsBtn.style.display = 'flex';
                logoutBtn.style.display = 'flex';
            } else {
                loginStatus.innerHTML = `<strong>Non connect√©</strong><span>Connectez-vous pour profiter de tous les avantages</span>`;
                loginBtn.style.display = 'flex';
                profileBtn.style.display = 'none';
                reservationsBtn.style.display = 'none';
                logoutBtn.style.display = 'none';
            }
        }

        function showProfile() {
            toggleUserMenu();
            alert('üë§ Mon Profil\n\n' + currentUser.name + '\n' + currentUser.email + '\n\nGestion de vos informations personnelles.');
        }

        function showReservations() {
            toggleUserMenu();
            alert('üìã Mes R√©servations\n\nVoir l\'historique de vos r√©servations et r√©servations actives.');
        }

        // Close dropdown when clicking outside
        document.addEventListener('click', function(event) {
            const userMenu = document.querySelector('.user-menu');
            const dropdown = document.getElementById('userDropdown');
            
            if (!userMenu.contains(event.target)) {
                dropdown.classList.remove('active');
            }
        });

        // Fix map resize on window resize
        window.addEventListener('resize', function() {
            if (map) {
                setTimeout(() => map.invalidateSize(), 100);
            }
            if (fullMap) {
                setTimeout(() => fullMap.invalidateSize(), 100);
            }
        });
    </script>
<script>

</script>
	
</body>
</html>
